# IMPORTANT: Environment Variables Setup

## üîë API Keys Required

This application requires API keys for AI services:

1. **OpenAI API Key** - For GPT-based script generation
   - Get it from: https://platform.openai.com/api-keys
   - Cost: ~$0.002 per request (gpt-4o-mini)

2. **Google Gemini API Key** - Alternative AI provider
   - Get it from: https://aistudio.google.com/app/apikey
   - Cost: Free tier available

3. **Pictory API Key** (Optional) - AI script-to-video generation
   - Get it from: https://www.pictory.ai/
   - Supports: Script-to-video, voice-over, stock footage search
   - Cost: Free tier + paid plans available

4. **Kapwing API Key** (Optional) - Advanced video editing & composition
   - Get it from: https://www.kapwing.com/api
   - Features: Smart resize, subtitle styling, batch processing
   - Cost: Free tier + paid plans available

## üìù Setup Instructions

1. Copy `.env.example` to `.env`:
   ```bash
   cd apps/orchestrator
   copy .env.example .env
   ```

2. Edit `.env` and add your API keys:
   ```env
   OPENAI_API_KEY=sk-your-actual-key-here
   GEMINI_API_KEY=your-actual-key-here
   PICTORY_API_KEY=your-pictory-api-key-here
   KAPWING_API_KEY=your-kapwing-api-key-here
   ```

3. Restart the backend server:
   ```bash
   pnpm --filter @app/orchestrator dev
   ```

## ‚ö†Ô∏è Security Notes

- **NEVER** commit `.env` to version control
- `.env` is already in `.gitignore`
- Keep your API keys secure and private
- If keys are missing, mock responses will be used

## üß™ Testing Without API Keys

The application will work without API keys in development mode using mock responses. This is useful for:
- Testing UI workflows
- Developing new features
- Running automated tests

To use real AI services, you MUST configure API keys.

## üé¨ External Video Processing Services

This application supports **two professional external video processing services** that can be used individually or together in a hybrid pipeline:

### Pictory.ai Integration

**What it does:**
- Automatically converts text scripts into engaging videos
- Generates voice-overs from your text
- Searches and adds relevant stock footage
- Supports multiple aspect ratios (9:16, 16:9, 1:1)

**API Endpoint:** `POST /external-video/process`
```json
{
  "method": "pictory",
  "script": "Your video script here...",
  "aspectRatio": "9:16",
  "voiceId": "male-voice-1"
}
```

**Get your API key:**
1. Visit https://www.pictory.ai/
2. Sign up and create an account
3. Go to Settings ‚Üí API Keys
4. Copy your API key and add it to `.env`

---

### Kapwing Integration

**What it does:**
- Advanced video editing and composition
- **Smart Resize** - Intelligently resizes videos with subject tracking
- Professional subtitle/caption styling with 15+ preset animations
- Multi-layer composition (video, audio, images, text)
- Batch processing for up to 50 videos simultaneously

**API Endpoints:**
- `POST /external-video/process` (with method: "kapwing")
- `POST /external-video/kapwing/smart-resize` (Smart resize)
- `POST /external-video/batch` (Batch processing)

**Example Smart Resize:**
```json
{
  "videoUrl": "path/to/video.mp4",
  "targetRatio": "9:16",
  "method": "kapwing"
}
```

**Get your API key:**
1. Visit https://www.kapwing.com/api
2. Sign up and create an account
3. Go to API Settings
4. Generate API key and add it to `.env`

---

### Hybrid Pipeline

For maximum quality and features, use the hybrid processing mode:

1. **Pictory** generates base video from script
2. **Kapwing** applies smart resize + professional subtitles
3. **FFmpeg** adds brand kit (logo, watermarks, intros/outros)

**Usage:**
```json
{
  "method": "hybrid",
  "script": "Your script...",
  "aspectRatio": "9:16"
}
```

---

### Cost Optimization

- **Pictory:** Free tier includes 2 videos/month + paid plans
- **Kapwing:** Free tier includes limited renders + paid plans
- **Local Processing:** FFmpeg is completely free (no API calls)
- Application includes **intelligent caching** reducing API calls by 70%
